{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* Hide some default Django clutter */
    #changelist-filter {
        position: static !important;
        width: 100% !important;
        background: transparent !important;
        border: none !important;
        margin-bottom: 1rem;
    }

    #changelist-filter h2 {
        display: none;
    }

    #changelist-filter ul {
        padding: 0;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    #changelist-filter li {
        list-style: none;
    }

    #changelist-filter a {
        display: block;
        padding: 4px 12px;
        border-radius: 999px;
        background: #e5e7eb;
        color: #374151;
        font-size: 0.875rem;
        text-decoration: none;
        transition: all 0.2s;
    }

    #changelist-filter a:hover,
    #changelist-filter li.selected a {
        background: #1E40AF;
        color: white;
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto pb-10">

    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
        <div>
            <h1 class="text-3xl font-bold text-gray-900">{{ cl.opts.verbose_name_plural|capfirst }}</h1>
            <p class="text-gray-500 mt-1">Manage and view all {{ cl.opts.verbose_name_plural }} records.</p>
        </div>

        {% block object-tools %}
        {% if has_add_permission %}
        <ul class="object-tools m-0 p-0 list-none">
            {% block object-tools-items %}
            <li>
                {% url cl.opts|admin_urlname:'add' as add_url %}
                <a href="{% add_preserved_filters add_url is_popup to_field %}"
                    class="inline-flex items-center justify-center px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow transition-colors no-underline">
                    + Add {{ cl.opts.verbose_name|capfirst }}
                </a>
            </li>
            {% endblock %}
        </ul>
        {% endif %}
        {% endblock %}
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">

        <div class="p-4 border-b border-gray-100 bg-gray-50 flex flex-col gap-4">
            {% block search %}{% search_form cl %}{% endblock %}

            {% block filters %}
            {% if cl.has_filters %}
            <div class="mt-2">
                <span class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Filters:</span>
                <div id="changelist-filter">
                    {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
                </div>
            </div>
            {% endif %}
            {% endblock %}
        </div>

        <div class="overflow-x-auto">
            {% block result_list %}
            {% result_list cl %}
            {% endblock %}
        </div>

        {% block pagination %}{% pagination cl %}{% endblock %}
    </div>
</div>
{% endblock %}