{% extends "admin/base_site.html" %}
{% load static admin_urls %}

{% block title %}{% if add %}Add{% else %}Change{% endif %} {{ opts.verbose_name }} - Admin Portal{% endblock %}

{% block extrahead %}
<link rel="stylesheet" href="{% static 'admin/css/custom_forms.css' %}">
{% endblock %}

{% block breadcrumb_content %}
‚Ä∫ <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
‚Ä∫ <span>{% if add %}Add{% else %}Change{% endif %}</span>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">{% if add %}Add{% else %}Edit{% endif %} {{ opts.verbose_name|capfirst }}</h1>
    <p class="page-subtitle">{% if add %}Create a new{% else %}Modify existing{% endif %} {{ opts.verbose_name|lower }}
    </p>
</div>

<div class="form-container">
    <form method="post" id="{{ opts.model_name }}_form" {% if has_file_field %}enctype="multipart/form-data" {% endif
        %}>
        {% csrf_token %}

        {% if errors %}
        <div class="message message-error" style="margin-bottom: 1.5rem;">
            <strong>Please correct the errors below.</strong>
            {{ adminform.form.non_field_errors }}
        </div>
        {% endif %}

        {% for fieldset in adminform %}
        <fieldset class="form-fieldset">
            {% if fieldset.name %}
            <h2 class="fieldset-title">{{ fieldset.name }}</h2>
            {% endif %}

            {% for line in fieldset %}
            <div class="form-row">
                {% for field in line %}
                <div class="form-field">
                    <label class="form-label" for="{{ field.field.id_for_label }}">
                        {{ field.field.label }}{% if field.field.field.required %}<span class="required">*</span>{%
                        endif %}
                    </label>

                    {% if field.is_readonly %}
                    <div class="readonly-field">
                        {{ field.contents|safe }}
                    </div>
                    {% else %}
                    {{ field.field }}
                    {% if field.field.help_text %}
                    <p class="help-text">{{ field.field.help_text|safe }}</p>
                    {% endif %}
                    {% if field.field.errors %}
                    <p class="error-text">{{ field.field.errors|first }}</p>
                    {% endif %}
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </fieldset>
        {% endfor %}

        <!-- Submit Buttons -->
        <div class="form-actions">
            <button type="submit" name="_save" class="btn btn-primary">
                üíæ Save
            </button>
            <button type="submit" name="_continue" class="btn btn-success">
                üíæ Save and Continue Editing
            </button>
            <button type="submit" name="_addanother" class="btn btn-secondary">
                ‚ûï Save and Add Another
            </button>
            <a href="{% url opts|admin_urlname:'changelist' %}" class="btn btn-secondary">
                Cancel
            </a>

            {% if not add and has_delete_permission %}
            <a href="{% url opts|admin_urlname:'delete' original.pk|admin_urlquote %}"
                class="btn btn-danger delete-btn">
                üóëÔ∏è Delete
            </a>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}